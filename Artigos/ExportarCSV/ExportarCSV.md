﻿# Exportando dados para um arquivo csv com JavaScript## IntroduçãoEai pessoal tudo bem? Neste artigo eu gostaria de compartilhar a resolução de um problema que surgiu esses dias no trabalho. E por mais simples que possa parecer o problema, tivemos um pouco de dificuldade para resolver, talvez a dúvida sobre qual a melhor forma de abordar a resolução do problema, ou por estar trabalhando com uma tecnologia nova para mim e para o time até então (Polymer 2). Mas enfim, nós encontramos uma maneira legal, que performou bem e o código ficou a principio bem escrito e bem fácil de entender.#### Playlist- Pra esse artigo eu coloquei o álbum [Master Of Reality](https://www.deezer.com/album/15485480?utm_source=deezer&utm_content=album-15485480&utm_term=1178572906_1564885320&utm_medium=web) do [Black Sabbath](https://www.deezer.com/artist/647?utm_source=deezer&utm_content=artist-647&utm_term=1178572906_1564885360&utm_medium=web) para reproduzir. Viva o Metal hehe \m/---## O ProblemaO cliente solicitou que exportássemos os dados de um determinado sistema em PDF e CSV (que só foi solicitado depois). Até então tudo bem, o sistema é feito em Polymer 2 (feito por outra empresa), e nós não temos muito know-how com a tecnologia, mas como já tinha um componente de exportação para PDF, pensamos que seria bem tranquilo estender a funcionalidade que servia para imprimir/exportar um único registro, para funcionar com vários registros (definidos por um filtro).Então, comecei a analisar o sistema, e ver o que daria para reaproveitar, fiz um novo componente baseado no atual, depois de um pouco de esforço e adequações, ficou bala, funcionou como gostaríamos, ao entregar a funcionalidade foi informado que queriam em CSV também.Para exportar como CSV, daria um pouco mais de trabalho, eu nunca tinha mexido com CSV, nem sabia como funcionaria no Polymer, e minha intenção era não ter que ficar instalando várias coisas no projeto. Bom, lá vamos nós, dei uma olhada no NPM e achei um pacote de exportação, mas não curti muito a ideia de usa-lo, nem do pacote em si, ai fui atrás de outras soluções no pai Google, achei um artigo no StackOverflow, como a exportação não tinha intenção de virar feature, não teria problema se não fosse o melhor código, mas como todo Dev busca o código perfeito, tive minhas duvidas em usar o Stack para esse caso... mas como não tinha escolha resolvi dar uma chance, e eis que era algo super simples que parecia ser bem interessante.Dei uma olhada no código, entendi o que ele fazia, e comecei a implementar, funcionava perfeitamente com poucos dados (até cerca de 10 registros dos que iriamos trabalhar), porem iriamos exportar cerca de 2K de registros (que em PDF dava aproximadamente 1000 páginas) Um amigo do time, é fera em JS, e então chamei ele pra me dar um Help, e ele deu a ideia de implementarmos de maneira diferente, assim salvando o funcionamento do script e a conclusão da tarefa. ## Chega de enrolação, SHOW ME THE CODE!Depois dessa longa introdução, vamos ao código,```javascriptvar global = 10function main(){  e}```